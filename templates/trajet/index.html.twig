{% extends 'base.html.twig' %}


{% block body %}
<style>
    .example-wrapper { margin: 1em auto; max-width: 800px; width: 95%; font: 18px/1.5 sans-serif; }
    .example-wrapper code { background: #F5F5F5; padding: 2px 6px; }
</style>

<div class="example-wrapper">
    <h1> Détails du trajet </h1>

    <p id="covoitureur">Offre proposée par {{ trajet.covoitureur.prenom }}</p>

    <p id="lieuDepart">Lieu de départ : {{ trajet.lieuDepart }}</p>

    <p id="dateDepart">Date de départ : {{ trajet.dateHeureDepart|date("d/m/Y - H:i") }}</p>

    <p id="lieuRDV">Lieu de rendez-vous : {{ trajet.precisionLieuRdv }}</p>

    <p id="prix">Prix : {{ trajet.prix }}€</p>

    {% if trajet.pointIntermediaires %}
        <p id="prevPointsIntermediaires">Etape(s) intermédiaire(s) : </p>
        <div id="listePtIntermediaires">
        <ol>
        {% for p in trajet.pointIntermediaires %}
            <li> {{ p.ville }}</li>
        {% endfor %}
        </ol>
        </div>
    {% endif %}

    <p id="lieuArrive">Lieu d'arrivée : {{ trajet.lieuArrive }} </p>

    <p id="commentaire">Commentaire du conducteur : {{ trajet.commentaire }} </p>

    <p id="capaciteMax">Places disponibles : {{ trajet.placesDispo }} / {{ trajet.capaciteMax }} </p>

    {% if app.user.id != trajet.covoitureur.id %}
        {% if reponse %}
            <p>Votre réponse :</p>
            {{ reponse.texteReponse }}
            {% if reponse.etatReponse is same as("En attente") %}
                <p>Votre réponse n'a pas encore été traitée par le conducteur.</p>
            {% elseif reponse.etatReponse is same as("Acceptée") %}
                <p>Vous réponse a été acceptée, veuillez consulter vos notifications pour savoir comment contacter directement le conducteur.</p>
            {% else %}
                <p>Votre réponse a été refusée.</p>
            {% endif %}
        {% elseif trajet.placesDispo <= 0 %}
            <p>Il n'y a plus de place disponible pour ce trajet.</p>
        {% else %}
            {{ form(form, { 'attr': {'autocomplete': 'off'} }) }}   
        {% endif %}
    {% else %}
        {% if trajet.utilisateurs %}
            <p>Passagers acceptés : </p>
            <ul>
            {% for u in trajet.utilisateurs %}
                <li>{{ u.prenom }}</li>
            {% endfor %}
            </ul>
        {% else %}
            <p>Vous n'avez accepté aucun passager pour l'instant.</p>
        {% endif %}
        
    {% endif %}

</div>
{% endblock %}
